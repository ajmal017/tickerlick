#!/usr/bin/perl
$str = '<table border="1" cellpadding="1" cellspacing="1" width="70%" align="center"><tr><td><table border="1"><tr bgcolor="#00FFFF"><td>price date</td><td>close price</td><td>10 DMA</td><td>50 DMA</td><td>200 DMA<td>12 Dy EMA</td><td>26 Dy EMA</td><td>MACD</td><td>9 Dy EMA</td><td>Trend</td><td>Signal Strength</td><td>Crossover</td></tr><tr><td>2012-10-29</td><td>141.35</td><td>143.093</td><td>143.342</td><td>136.846</td><td>142.679</td><td>143.273</td><td>-0.594</td><td>-0.113<td>Bearish</td><td>-0.481</td><tr><td>2012-10-26</td><td>141.35</td><td>143.366</td><td>143.343</td><td>136.774</td><td>142.921</td><td>143.427</td><td>-0.506</td><td>0.007<td>Bearish</td><td>-0.513</td><td>&nbsp;</tr><tr><td>2012-10-25</td><td>141.43</td><td>143.52</td><td>143.341</td><td>136.705</td><td>143.207</td><td>143.593</td><td>-0.386</td><td>0.135<td>Bearish</td><td>-0.521</td><td>&nbsp;</tr><tr><td>2012-10-24</td><td>141.02</td><td>143.713</td><td>143.317</td><td>136.634</td><td>143.53</td><td>143.766</td><td>-0.237</td><td>0.265<td>Bearish</td><td>-0.502</td><td>&nbsp;</tr><tr><td>2012-10-23</td><td>141.42</td><td>143.939</td><td>143.297</td><td>136.565</td><td>143.986</td><td>143.986</td><td>-0.000</td><td>0.391<td>Bearish</td><td>-0.391</td><td>&nbsp;</tr><tr><td>2012-10-22</td><td>143.41</td><td>144.217</td><td>143.269</td><td>136.489</td><td>144.452</td><td>144.191</td><td>0.261</td><td>0.489<td>Bearish</td><td>-0.228</td><td>&nbsp;</tr><tr><td>2012-10-19</td><td>143.39</td><td>144.44</td><td>143.203</td><td>136.401</td><td>144.641</td><td>144.253</td><td>0.389</td><td>0.546<td>Bearish</td><td>-0.157</td><td>&nbsp;</tr><tr><td>2012-10-18</td><td>145.82</td><td>144.715</td><td>143.132</td><td>136.315</td><td>144.869</td><td>144.322</td><td>0.547</td><td>0.585<td>Bearish</td><td>-0.038</td><td>&nbsp;</tr><tr><td>2012-10-17</td><td>146.2</td><td>144.746</td><td>143.01</td><td>136.215</td><td>144.696</td><td>144.202</td><td>0.495</td><td>0.594<td>Bearish</td><td>-0.100</td><td>&nbsp;</tr><tr><td>2012-10-16</td><td>145.54</td><td>144.635</td><td>142.878</td><td>136.112</td><td>144.423</td><td>144.042</td><td>0.381</td><td>0.619<td>Bearish</td><td>-0.238</td><td>&nbsp;</tr><tr><td>2012-10-15</td><td>144.08</td><td>144.531</td><td>142.745</td><td>136.002</td><td>144.22</td><td>143.922</td><td>0.299</td><td>0.679<td>Bearish</td><td>-0.380</td><td>&nbsp;</tr><tr><td>2012-10-12</td><td>142.89</td><td>144.558</td><td>142.635</td><td>135.903</td><td>144.246</td><td>143.909</td><td>0.337</td><td>0.774<td>Bearish</td><td>-0.437</td><td>&nbsp;</tr><tr><td>2012-10-11</td><td>143.36</td><td>144.666</td><td>142.496</td><td>135.804</td><td>144.493</td><td>143.991</td><td>0.502</td><td>0.883<td>Bearish</td><td>-0.382</td><td>&nbsp;</tr><tr><td>2012-10-10</td><td>143.28</td><td>144.794</td><td>142.366</td><td>135.71</td><td>144.699</td><td>144.042</td><td>0.657</td><td>0.979<td>Bearish</td><td>-0.322</td><td>&nbsp;</tr><tr><td>2012-10-09</td><td>144.2</td><td>144.795</td><td>142.24</td><td>135.616</td><td>144.957</td><td>144.103</td><td>0.855</td><td>1.059<td>Bearish</td><td>-0.205</td><td>&nbsp;</tr><tr><td>2012-10-08</td><td>145.64</td><td>144.785</td><td>142.114</td><td>135.512</td><td>145.095</td><td>144.095</td><td>1.000</td><td>1.110<td>Bearish</td><td>-0.110</td><td>&nbsp;</tr><tr><td>2012-10-05</td><td>146.14</td><td>144.786</td><td>141.96</td><td>135.396</td><td>144.996</td><td>143.971</td><td>1.025</td><td>1.138<td>Bearish</td><td>-0.113</td><td>&nbsp;</tr><tr><td>2012-10-04</td><td>146.13</td><td>144.759</td><td>141.747</td><td>135.276</td><td>144.788</td><td>143.798</td><td>0.990</td><td>1.166<td>Bearish</td><td>-0.176</td><td>&nbsp;</tr><tr><td>2012-10-03</td><td>145.09</td><td>144.739</td><td>141.489</td><td>135.138</td><td>144.544</td><td>143.611</td><td>0.933</td><td>1.210<td>Bearish</td><td>-0.277</td><td>&nbsp;</tr><tr><td>2012-10-02</td><td>144.5</td><td>144.822</td><td>141.252</td><td>135.011</td><td>144.445</td><td>143.493</td><td>0.952</td><td>1.279<td>Bearish</td><td>-0.327</td><td>&nbsp;</tr><tr><td>2012-10-01</td><td>144.35</td><td>144.956</td><td>141.049</td><td>134.887</td><td>144.435</td><td>143.412</td><td>1.023</td><td>1.361<td>Bearish</td><td>-0.338</td><td>&nbsp;</tr><tr><td>2012-09-28</td><td>143.97</td><td>145.117</td><td>140.877</td><td>134.761</td><td>144.45</td><td>143.337</td><td>1.113</td><td>1.445<td>Bearish</td><td>-0.332</td><td>&nbsp;</tr><tr><td>2012-09-27</td><td>144.64</td><td>145.366</td><td>140.738</td><td>134.643</td><td>144.537</td><td>143.286</td><td>1.250</td><td>1.529<td>Bearish</td><td>-0.278</td><td>&nbsp;</tr><tr><td>2012-09-26</td><td>143.29</td><td>145.483</td><td>140.578</td><td>134.528</td><td>144.518</td><td>143.178</td><td>1.340</td><td>1.598<td>Bearish</td><td>-0.258</td><td>&nbsp;</tr><tr><td>2012-09-25</td><td>144.1</td><td>145.516</td><td>140.425</td><td>134.429</td><td>144.741</td><td>143.169</td><td>1.573</td><td>1.663<td>Bearish</td><td>-0.090</td><td>Sell</tr><tr><td>2012-09-24</td><td>145.65</td><td>145.421</td><td>140.237</td><td>134.315</td><td>144.858</td><td>143.094</td><td>1.764</td><td>1.685<td>Bullish</td><td>0.079</td><td>&nbsp;</tr><tr><td>2012-09-21</td><td>145.87</td><td>145.131</td><td>140.024</td><td>134.207</td><td>144.714</td><td>142.889</td><td>1.826</td><td>1.665<td>Bullish</td><td>0.160</td><tr><td>2012-09-20</td><td>145.93</td><td>144.9</td><td>139.763</td><td>134.096</td><td>144.504</td><td>142.65</td><td>1.854</td><td>1.625<td>Bullish</td><td>0.229</td><td>&nbsp;</tr><tr><td>2012-09-19</td><td>145.92</td><td>144.608</td><td>139.513</td><td>133.984</td><td>144.245</td><td>142.388</td><td>1.858</td><td>1.568<td>Bullish</td><td>0.290</td><td>&nbsp;</tr><tr><td>2012-09-18</td><td>145.84</td><td>144.032</td><td>139.264</td><td>133.866</td><td>143.941</td><td>142.105</td><td>1.836</td><td>1.495<td>Bullish</td><td>0.341</td><td>&nbsp;</tr><tr><td>2012-09-17</td><td>145.96</td><td>143.476</td><td>139.039</td><td>133.748</td><td>143.596</td><td>141.806</td><td>1.790</td><td>1.410<td>Bullish</td><td>0.379</td><td>&nbsp;</tr><tr><td>2012-09-14</td><td>146.46</td><td>142.921</td><td>138.815</td><td>133.63</td><td>143.166</td><td>141.474</td><td>1.692</td><td>1.315<td>Bullish</td><td>0.377</td><td>&nbsp;</tr><tr><td>2012-09-13</td><td>145.81</td><td>142.249</td><td>138.607</td><td>133.486</td><td>142.567</td><td>141.075</td><td>1.492</td><td>1.221<td>Bullish</td><td>0.271</td><td>&nbsp;</tr><tr><td>2012-09-12</td><td>143.62</td><td>141.744</td><td>138.424</td><td>133.343</td><td>141.977</td><td>140.696</td><td>1.281</td><td>1.153<td>Bullish</td><td>0.127</td><td>&nbsp;</tr><tr><td>2012-09-11</td><td>143.15</td><td>141.447</td><td>138.268</td><td>133.194</td><td>141.678</td><td>140.462</td><td>1.216</td><td>1.122<td>Bullish</td><td>0.094</td><td>&nbsp;</tr><tr><td>2012-09-10</td><td>142.75</td><td>141.211</td><td>138.112</td><td>133.049</td><td>141.41</td><td>140.247</td><td>1.162</td><td>1.098<td>Bullish</td><td>0.064</td><td>&nbsp;</tr><tr><td>2012-09-07</td><td>143.56</td><td>141.012</td><td>137.899</td><td>132.919</td><td>141.166</td><td>140.047</td><td>1.119</td><td>1.082<td>Bullish</td><td>0.037</td><td>Buy</tr><tr><td>2012-09-06</td><td>143.01</td><td>140.647</td><td>137.677</td><td>132.786</td><td>140.731</td><td>139.766</td><td>0.966</td><td>1.073<td>Bearish</td><td>-0.107</td><td>&nbsp;</tr><tr><td>2012-09-05</td><td>140.16</td><td>140.453</td><td>137.442</td><td>132.669</td><td>140.317</td><td>139.506</td><td>0.811</td><td>1.099<td>Bearish</td><td>-0.288</td><tr><td>2012-09-04</td><td>140.28</td><td>140.538</td><td>137.252</td><td>132.566</td><td>140.346</td><td>139.454</td><td>0.892</td><td>1.172<td>Bearish</td><td>-0.280</td><td>&nbsp;</tr><tr><td>2012-08-31</td><td>140.41</td><td>140.653</td><td>137.101</td><td>132.471</td><td>140.358</td><td>139.388</td><td>0.970</td><td>1.242<td>Bearish</td><td>-0.272</td><td>&nbsp;</tr><tr><td>2012-08-30</td><td>139.74</td><td>140.755</td><td>136.928</td><td>132.387</td><td>140.348</td><td>139.306</td><td>1.042</td><td>1.309<td>Bearish</td><td>-0.268</td><td>&nbsp;</tr><tr><td>2012-08-29</td><td>140.76</td><td>140.905</td><td>136.828</td><td>132.302</td><td>140.458</td><td>139.271</td><td>1.187</td><td>1.376<td>Bearish</td><td>-0.190</td><td>&nbsp;</tr><tr><td>2012-08-28</td><td>140.65</td><td>140.849</td><td>136.712</td><td>132.218</td><td>140.403</td><td>139.152</td><td>1.251</td><td>1.424<td>Bearish</td><td>-0.173</td><td>&nbsp;</tr><tr><td>2012-08-27</td><td>140.79</td><td>140.788</td><td>136.573</td><td>132.124</td><td>140.358</td><td>139.032</td><td>1.327</td><td>1.467<td>Bearish</td><td>-0.140</td><td>&nbsp;</tr><tr><td>2012-08-24</td><td>140.76</td><td>140.711</td><td>136.426</td><td>132.023</td><td>140.28</td><td>138.891</td><td>1.390</td><td>1.502<td>Bearish</td><td>-0.112</td><td>&nbsp;</tr><tr><td>2012-08-23</td><td>139.91</td><td>140.644</td><td>136.252</td><td>131.945</td><td>140.193</td><td>138.741</td><td>1.453</td><td>1.530<td>Bearish</td><td>-0.077</td><td>Sell</tr><tr><td>2012-08-22</td><td>141.07</td><td>140.639</td><td>136.068</td><td>131.863</td><td>140.245</td><td>138.647</td><td>1.598</td><td>1.549<td>Bullish</td><td>0.049</td><td>&nbsp;</tr><tr><td>2012-08-21</td><td>141.01</td><td>140.506</td><td>135.877</td><td>131.772</td><td>140.095</td><td>138.453</td><td>1.643</td><td>1.537<td>Bullish</td><td>0.106</td><tr><td>2012-08-20</td><td>141.43</td><td>140.362</td><td>135.658</td><td>131.685</td><td>139.929</td><td>138.248</td><td>1.681</td><td>1.511<td>Bullish</td><td>0.171</td><td>&nbsp;</tr></table></td></tr></table>';
@arr = split (/\<tr\>/,$str);
foreach (@arr)
{
if(/^<td>(.*?)<\/td>.*?(Bearish|Bullish).*?(Sell|Buy).*?<\/tr>/)
{
 print "$1\t$2\t$3\n";
 last;
}
}
$str2 = '<tr><td>2012-09-25</td><td>144.1</td><td>145.516</td><td>140.425</td><td>134.429</td><td>144.741</td><td>143.169</td><td>1.573</td><td>1.663<td>Bearish</td><td>-0.090</td><td>Sell</tr>';

if($str2 =~ /^<tr><td>(.*?)<\/td>.*?(Bearish|Bullish).*?(Sell|Buy).*?<\/tr>/s)
{
 print "$1\t$2\t$3\n";
}

